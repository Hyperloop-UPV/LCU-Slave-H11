{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Start Debug Server for Simulator on emulated arch",
      "type": "shell",
      "command": "ROSETTA_DEBUGSERVER_PORT=1234 ./out/build/latest.elf",
      "problemMatcher": [],
      "isBackground": true
    },
    {
      "label": "Tests: Configure simulator",
      "type": "shell",
      "command": "cmake --preset simulator",
      "problemMatcher": []
    },
    {
      "label": "Tests: Build simulator",
      "type": "shell",
      "command": "cmake --build --preset simulator -j8",
      "dependsOn": [
        "Tests: Configure simulator"
      ],
      "problemMatcher": []
    },
    {
      "label": "Tests: Run all (simulator)",
      "type": "shell",
      "command": "ctest --test-dir out/build/simulator/deps/ST-LIB --output-on-failure",
      "dependsOn": [
        "Tests: Build simulator"
      ],
      "problemMatcher": []
    },
    {
      "label": "Tests: Run ADC (simulator)",
      "type": "shell",
      "command": "ctest --test-dir out/build/simulator/deps/ST-LIB -R ADCTest --output-on-failure",
      "dependsOn": [
        "Tests: Build simulator"
      ],
      "problemMatcher": []
    }
  ]
}
